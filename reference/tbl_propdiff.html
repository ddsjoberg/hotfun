<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calculating unadjusted and adjusted differences in rates — tbl_propdiff • hotfun</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Calculating unadjusted and adjusted differences in rates — tbl_propdiff" />
<meta property="og:description" content="This function calculates the unadjusted or adjusted difference in rates with confidence interval." />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hotfun</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.12</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/ddsjoberg/hotfun">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculating unadjusted and adjusted differences in rates</h1>
    
    <div class="hidden name"><code>tbl_propdiff.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function calculates the unadjusted or adjusted difference in rates with confidence interval.</p>
    </div>

    <div class="ref-usage sourceCode"><pre class='sourceCode r'><code><span class='fu'>tbl_propdiff</span><span class='op'>(</span>
  <span class='va'>data</span>,
  <span class='va'>y</span>,
  <span class='va'>x</span>,
  formula <span class='op'>=</span> <span class='st'>"{y} ~ {x}"</span>,
  label <span class='op'>=</span> <span class='cn'>NULL</span>,
  statistic <span class='op'>=</span> <span class='st'>"{n} ({p}%)"</span>,
  method <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"chisq"</span>, <span class='st'>"exact"</span>, <span class='st'>"boot_sd"</span>, <span class='st'>"boot_centile"</span><span class='op'>)</span>,
  conf.level <span class='op'>=</span> <span class='fl'>0.95</span>,
  bootstrapn <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/ifelse.html'>ifelse</a></span><span class='op'>(</span><span class='va'>method</span> <span class='op'>==</span> <span class='st'>"boot_centile"</span>, <span class='fl'>2000</span>, <span class='fl'>200</span><span class='op'>)</span>,
  estimate_fun <span class='op'>=</span> <span class='va'>style_sigfig</span>,
  pvalue_fun <span class='op'>=</span> <span class='va'>style_pvalue</span>
<span class='op'>)</span></code></pre></div>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A data frame</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>vector of binary outcome variables. Outcome variables can be
numeric, character or factor, but must have two and only two non-missing levels</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>string indicating the binary stratifying variable. The stratifying
variable can be numeric, character or factor, but must have two and only two
non-missing levels</p></td>
    </tr>
    <tr>
      <th>formula</th>
      <td><p>By default, <code>"{y} ~ {x}"</code>. To include covariates for an adjusted
risk difference, add covariate names to the formula, e.g. <code>"{y} ~ {x} + age"</code></p></td>
    </tr>
    <tr>
      <th>label</th>
      <td><p>List of formulas specifying variables labels, If a variable's label is
not specified here, the label attribute (<code>attr(data$high_grade, "label")</code>) is used.
If attribute label is <code>NULL</code>, the variable name will be used.</p></td>
    </tr>
    <tr>
      <th>statistic</th>
      <td><p>Statistics to display for each group. Default <code>"{n} ({p}%)"</code></p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>The method for calculating p-values and confidence intervals around the
difference in rates. The options are <code>"chisq"</code>, <code>"exact"</code>, <code>"boot_centile"</code>,
and <code>"boot_sd"</code>. See below for details. Default method is <code>"chisq"</code>.</p></td>
    </tr>
    <tr>
      <th>conf.level</th>
      <td><p>Confidence level of the returned confidence interval.
Must be a single number between 0 and 1. The default is a 95% confidence interval.</p></td>
    </tr>
    <tr>
      <th>bootstrapn</th>
      <td><p>The number of bootstrap resamples to use. The default is 2000
for <code>"boot_centile"</code> and 200 for <code>"boot_sd"</code></p></td>
    </tr>
    <tr>
      <th>estimate_fun</th>
      <td><p>Function to round and format estimates. By default
<code>style_sigfig</code>, but can take any formatting function</p></td>
    </tr>
    <tr>
      <th>pvalue_fun</th>
      <td><p>Function to round and format p-value. By default
<code>style_pvalue</code>, but can take any formatting function</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>tbl_propdiff</code> object, with sub-class <code>"gtsummary"</code></p>
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    

<ul>
<li><p>The <code>chisq</code> option returns a p-value from the <code>prop.test</code> function and a
confidence interval for the unadjusted difference in proportions based on
the normal approximation.</p></li>
<li><p>The <code>exact</code> option returns a p-value from the <code>fisher.test</code> function. The
confidence interval returned by this option is the same as the confidence
interval returned by the <code>chisq</code> option and is based on the normal approximation.</p></li>
<li><p>The <code>boot_centile</code> option calculates the adjusted difference between groups
in all bootstrap samples (the default for this method is 2000 resamples)
and generates the confidence intervals from the distribution of these
differences. For the default, a 95% confidence interval, the 2.5 and 97.5
centiles are used. The p-value presented is from a logistic regression model.</p></li>
<li><p>The <code>boot_sd</code> option calculates the adjusted difference between groups
in all bootstrap samples (the default for this method is 200 resamples).
The mean and standard deviation of the adjusted difference across all
resamples are calculated. The standard deviation is then used as the
standard error to calculate the confidence interval based on the true
adjusted difference. The p-value presented is from a logistic regression model.</p></li>
</ul>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <div class="ref-examples sourceCode"><pre class='sourceCode r'><code><span class='r-in'><span class='fu'>tbl_propdiff</span><span class='op'>(</span></span>
<span class='r-in'>  data <span class='op'>=</span> <span class='va'>trial</span>,</span>
<span class='r-in'>  y <span class='op'>=</span> <span class='st'>"response"</span>,</span>
<span class='r-in'>  x <span class='op'>=</span> <span class='st'>"trt"</span></span>
<span class='r-in'><span class='op'>)</span></span>
<span class='r-wrn co'><span class='r-pr'>#&gt;</span> <span class='warning'>Warning: </span>The `stat_by` argument of `modify_header()` is deprecated as of gtsummary 1.3.6.</span>
<span class='r-wrn co'><span class='r-pr'>#&gt;</span> Use `modify_header(update = all_stat_cols() ~ "**{level}**")` instead.</span>
<span class='r-wrn co'><span class='r-pr'>#&gt;</span> <span style='color: #555555;'>This warning is displayed once every 8 hours.</span></span>
<span class='r-wrn co'><span class='r-pr'>#&gt;</span> <span style='color: #555555;'>Call `lifecycle::last_warnings()` to see where this warning was generated.</span></span>
<span class='r-err co'><span class='r-pr'>#&gt;</span> <span class='error'>Error in UseMethod("mutate")</span> no applicable method for 'mutate' applied to an object of class "NULL"</span>
<span class='r-in'></span>
<span class='r-in'><span class='fu'>tbl_propdiff</span><span class='op'>(</span></span>
<span class='r-in'>  data <span class='op'>=</span> <span class='va'>trial</span>,</span>
<span class='r-in'>  y <span class='op'>=</span> <span class='st'>"response"</span>,</span>
<span class='r-in'>  x <span class='op'>=</span> <span class='st'>"trt"</span>,</span>
<span class='r-in'>  formula <span class='op'>=</span> <span class='st'>"{y} ~ {x} + age + stage"</span>,</span>
<span class='r-in'>  method <span class='op'>=</span> <span class='st'>"boot_sd"</span>,</span>
<span class='r-in'>  bootstrapn <span class='op'>=</span> <span class='fl'>25</span></span>
<span class='r-in'><span class='op'>)</span></span>
<span class='r-err co'><span class='r-pr'>#&gt;</span> <span class='error'>Error in UseMethod("mutate")</span> no applicable method for 'mutate' applied to an object of class "NULL"</span>
</code></pre></div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by Daniel D. Sjoberg.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


